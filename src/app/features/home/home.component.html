<div class="dashboard-container">
    <h1 class="welcome-title">Hi, Welcome back ðŸ‘‹</h1>

    @if (dashboardService.statsResource.isLoading()) {
    <div class="stats-grid">
        @for (i of [1, 2, 3, 4]; track i) {
        <div class="stats-card-skeleton">
            <div class="skeleton skeleton-icon"></div>
            <div class="skeleton-info">
                <div class="skeleton skeleton-count"></div>
                <div class="skeleton skeleton-title"></div>
            </div>
        </div>
        }
    </div>

    <div class="charts-row">
        @for (i of [1, 2]; track i) {
        <mat-card class="chart-card">
            <mat-card-header style="padding: 24px 24px 0 24px;">
                <div class="skeleton" style="width: 40%; height: 24px; margin-bottom: 24px;"></div>
            </mat-card-header>
            <mat-card-content style="padding: 0 24px 24px 24px; height: 300px;">
                <div class="skeleton" style="width: 100%; height: 100%; border-radius: 8px;"></div>
            </mat-card-content>
        </mat-card>
        }
    </div>
    } @else if (dashboardService.statsResource.error()) {
    <div class="error-container">
        <p>Error loading dashboard data.</p>
        <button mat-button (click)="dashboardService.statsResource.reload()">Retry</button>
    </div>
    } @else {
    <div class="stats-grid">
        <app-stats-card title="Active Hosts" [count]="activeHosts()" icon="dns" color="#00AB55">
        </app-stats-card>

        <app-stats-card title="Active Devices" [count]="activeDevices()" icon="router" color="#1890FF">
        </app-stats-card>

        <app-stats-card title="Active Users" [count]="activeUsers()" icon="group" color="#FFC107">
        </app-stats-card>

        <app-stats-card title="Plugins" [count]="pluginCount()" icon="extension" color="#FF4842">
        </app-stats-card>
    </div>

    <div class="charts-row">
        <mat-card class="chart-card">
            <mat-card-header>
                <mat-card-title>Device Ownership</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <app-chart-wrapper [options]="deviceChartOptions()"></app-chart-wrapper>
            </mat-card-content>
        </mat-card>

        <mat-card class="chart-card">
            <mat-card-header>
                <mat-card-title>Pending Problems</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <app-chart-wrapper [options]="problemsChartOptions()"></app-chart-wrapper>
            </mat-card-content>
        </mat-card>
    </div>

    <h1>Tools</h1>
    <div class="tools-grid">
        @for (tool of tools; track tool.name) {
        <app-tool-card [name]="tool.name" [description]="tool.description" [logoUrl]="tool.logoUrl"
            [iconName]="tool.icon" [websiteUrl]="tool.link" [githubUrl]="tool.repo">
        </app-tool-card>
        }
    </div>
    }
</div>