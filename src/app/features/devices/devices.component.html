<div class="page-container">

    <app-table-toolbar [tabs]="tabs" [activeTab]="activeTab" [onlyMeActive]="onlyMeActive"
        [searchText]="quickFilterText" [activeFilterCount]="activeFilterCount" (tabChange)="onTabChange($event)"
        (onlyMeChange)="onOnlyMeChange($event)" (searchChange)="onSearchChange($event)"
        (clearFilters)="onClearFilters()">
        <div toolbar-actions class="actions">
            <button mat-flat-button color="primary" (click)="openImportDialog()">
                <mat-icon>upload_file</mat-icon> Import TXT
            </button>

            <button mat-stroked-button (click)="exportSelected()">
                <mat-icon>download</mat-icon> Export
            </button>

            <button mat-stroked-button (click)="deepUpdate()">
                <mat-icon>update</mat-icon> Deepload
            </button>

            <button mat-stroked-button (click)="reload()">
                <mat-icon>refresh</mat-icon> Reload
            </button>
        </div>
    </app-table-toolbar>

    <div class="grid-container">
        @if (devicesService.devicesResource.isLoading()) {
        <app-skeleton-loading-overlay></app-skeleton-loading-overlay>
        } @else if (devicesService.devicesResource.error()) {
        <div class="error-container">
            Error loading devices.
            <button mat-button (click)="reload()">Retry</button>
        </div>
        } @else {
        <app-ag-grid-wrapper [rowData]="devicesService.devicesResource.value() || []" [columnDefs]="columnDefs"
            [quickFilterText]="quickFilterText" (gridReady)="onGridReady($event)" (rowClicked)="onRowClicked($event)"
            (cellValueChanged)="onCellValueChanged($event)">
        </app-ag-grid-wrapper>
        }
    </div>
</div>